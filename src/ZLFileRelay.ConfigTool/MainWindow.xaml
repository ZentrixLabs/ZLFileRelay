<Window x:Class="ZLFileRelay.ConfigTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ZLFileRelay.ConfigTool"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        mc:Ignorable="d"
        Title="ZL File Relay - Configuration Tool" 
        Height="750" 
        Width="1100"
        MinHeight="600"
        MinWidth="900"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Main Content with TabControl -->
        <TabControl Grid.Row="0" Margin="10">
            
            <!-- Service Management Tab -->
            <TabItem Header="Service Management">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Service Status -->
                        <ui:SimpleStackPanel Spacing="10" Margin="0,0,0,20">
                            <TextBlock Text="Service Status" 
                                       Style="{StaticResource TitleTextBlockStyle}"/>
                            <Border Background="{DynamicResource SystemControlBackgroundAccentBrush}" 
                                    CornerRadius="4" 
                                    Padding="15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBlock Grid.Column="0" Text="Status:" Foreground="White" 
                                               VerticalAlignment="Center" FontWeight="Bold"/>
                                    <TextBlock Grid.Column="1" x:Name="ServiceStatusText" 
                                               Text="Unknown" 
                                               Foreground="White"
                                               FontWeight="Bold" 
                                               FontSize="16"
                                               VerticalAlignment="Center" 
                                               Margin="10,0" />
                                    <Button Grid.Column="2" 
                                            x:Name="RefreshStatusButton" 
                                            Content="🔄 Refresh" 
                                            Click="RefreshStatusButton_Click" />
                                </Grid>
                            </Border>
                        </ui:SimpleStackPanel>

                        <!-- Service Controls -->
                        <ui:SimpleStackPanel Spacing="10" Margin="0,0,0,20">
                            <TextBlock Text="Service Controls" 
                                       Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <WrapPanel>
                                <Button x:Name="InstallServiceButton" 
                                        Content="📦 Install Service" 
                                        Click="InstallServiceButton_Click" 
                                        Margin="0,0,10,10"
                                        Padding="15,8"/>
                                <Button x:Name="UninstallServiceButton" 
                                        Content="🗑️ Uninstall Service" 
                                        Click="UninstallServiceButton_Click" 
                                        Margin="0,0,10,10"
                                        Padding="15,8"/>
                                <Button x:Name="StartServiceButton" 
                                        Content="▶️ Start Service" 
                                        Click="StartServiceButton_Click" 
                                        Style="{StaticResource AccentButtonStyle}"
                                        Margin="0,0,10,10"
                                        Padding="15,8"/>
                                <Button x:Name="StopServiceButton" 
                                        Content="⏹️ Stop Service" 
                                        Click="StopServiceButton_Click" 
                                        Margin="0,0,10,10"
                                        Padding="15,8"/>
                            </WrapPanel>
                        </ui:SimpleStackPanel>

                        <!-- Credentials Status -->
                        <ui:SimpleStackPanel Spacing="10" Margin="0,0,0,20">
                            <TextBlock Text="SMB Credentials" 
                                       Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                                    BorderThickness="1" 
                                    CornerRadius="4" 
                                    Padding="15">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBlock Grid.Column="0" Text="Credentials:" VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" 
                                               x:Name="CredentialsStatusText" 
                                               Text="Not Configured" 
                                               FontWeight="Bold" 
                                               VerticalAlignment="Center" 
                                               Margin="10,0" />
                                    <Button Grid.Column="2" 
                                            x:Name="ConfigureCredentialsButton" 
                                            Content="🔐 Configure SMB" 
                                            Click="ConfigureCredentialsButton_Click" 
                                            Style="{StaticResource AccentButtonStyle}"
                                            Padding="15,8"/>
                                </Grid>
                            </Border>
                        </ui:SimpleStackPanel>

                        <!-- Log Output -->
                        <ui:SimpleStackPanel Spacing="10">
                            <TextBlock Text="Activity Log" 
                                       Style="{StaticResource SubtitleTextBlockStyle}"/>
                            <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                                    BorderThickness="1" 
                                    CornerRadius="4">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="200" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    
                                    <ScrollViewer Grid.Row="0" 
                                                  VerticalScrollBarVisibility="Auto" 
                                                  HorizontalScrollBarVisibility="Auto"
                                                  Padding="10">
                                        <ItemsControl x:Name="LogOutputItems">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding}" 
                                                               FontFamily="Consolas" 
                                                               FontSize="12"
                                                               TextWrapping="Wrap" />
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                    
                                    <Button Grid.Row="1" 
                                            x:Name="ClearLogButton" 
                                            Content="Clear Log" 
                                            Click="ClearLogButton_Click" 
                                            HorizontalAlignment="Right" 
                                            Margin="10" />
                                </Grid>
                            </Border>
                        </ui:SimpleStackPanel>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Configuration Tab (Placeholder) -->
            <TabItem Header="Configuration">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Configuration Editor" 
                                   Style="{StaticResource TitleTextBlockStyle}"
                                   Margin="0,0,0,20"/>
                        <TextBlock Text="Configuration editing UI will be added here" 
                                   Foreground="Gray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- SSH Settings Tab (Placeholder) -->
            <TabItem Header="SSH Settings">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="SSH Configuration" 
                                   Style="{StaticResource TitleTextBlockStyle}"
                                   Margin="0,0,0,20"/>
                        <TextBlock Text="SSH settings UI will be added here" 
                                   Foreground="Gray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Service Account Tab (Placeholder) -->
            <TabItem Header="Service Account">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Service Account Management" 
                                   Style="{StaticResource TitleTextBlockStyle}"
                                   Margin="0,0,0,20"/>
                        <TextBlock Text="Service account management UI will be added here" 
                                   Foreground="Gray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

        </TabControl>

        <!-- Status Bar -->
        <ui:SimpleStackPanel Grid.Row="1" 
                            Orientation="Horizontal" 
                            Spacing="10"
                            Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                            Height="30">
            <TextBlock x:Name="StatusBarText" 
                       Text="Ready" 
                       VerticalAlignment="Center"
                       Margin="10,0"/>
            <TextBlock Text="|" 
                       VerticalAlignment="Center"
                       Foreground="Gray"/>
            <TextBlock Text="ZL File Relay Configuration Tool v1.0" 
                       VerticalAlignment="Center"
                       Foreground="Gray"/>
        </ui:SimpleStackPanel>
    </Grid>
</Window>
